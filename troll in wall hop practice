local Players = game:GetService("Players")

local screenGui = Instance.new("ScreenGui")
screenGui.Name = "PlayerMenu"
screenGui.ResetOnSpawn = false
screenGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")

local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0, 300, 0, 250)
mainFrame.Position = UDim2.new(0.5, -150, 0.5, -125)
mainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
mainFrame.BorderSizePixel = 0
mainFrame.Active = true
mainFrame.Draggable = true
mainFrame.Parent = screenGui

local uiCorner = Instance.new("UICorner")
uiCorner.CornerRadius = UDim.new(0, 5)
uiCorner.Parent = mainFrame

local titleFrame = Instance.new("Frame")
titleFrame.Size = UDim2.new(1, 0, 0, 30)
titleFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
titleFrame.Parent = mainFrame

local titleLabel = Instance.new("TextLabel")
titleLabel.Size = UDim2.new(1, -60, 1, 0)
titleLabel.BackgroundTransparency = 1
titleLabel.Text = "Target player"
titleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
titleLabel.Font = Enum.Font.GothamBold
titleLabel.TextSize = 20
titleLabel.TextXAlignment = Enum.TextXAlignment.Left
titleLabel.Parent = titleFrame

local titleCorner = Instance.new("UICorner")
titleCorner.CornerRadius = UDim.new(0, 5)
titleCorner.Parent = titleFrame

local arrowButton = Instance.new("TextButton")
arrowButton.Size = UDim2.new(0, 30, 0, 30)
arrowButton.Position = UDim2.new(1, -60, 0, 0)
arrowButton.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
arrowButton.Text = "-"
arrowButton.TextColor3 = Color3.fromRGB(255, 255, 255)
arrowButton.Font = Enum.Font.GothamBold
arrowButton.TextSize = 20
arrowButton.Parent = titleFrame

local arrowCorner = Instance.new("UICorner")
arrowCorner.CornerRadius = UDim.new(0, 5)
arrowCorner.Parent = arrowButton

local closeButton = Instance.new("TextButton")
closeButton.Size = UDim2.new(0, 30, 0, 30)
closeButton.Position = UDim2.new(1, -30, 0, 0)
closeButton.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
closeButton.Text = "×"
closeButton.TextColor3 = Color3.fromRGB(255, 0, 0)
closeButton.Font = Enum.Font.GothamBold
closeButton.TextSize = 20
closeButton.Parent = titleFrame

local closeCorner = Instance.new("UICorner")
closeCorner.CornerRadius = UDim.new(0, 5)
closeCorner.Parent = closeButton

local contentFrame = Instance.new("Frame")
contentFrame.Size = UDim2.new(1, 0, 1, -30)
contentFrame.Position = UDim2.new(0, 0, 0, 30)
contentFrame.BackgroundTransparency = 1
contentFrame.Visible = true
contentFrame.Parent = mainFrame

local textBox = Instance.new("TextBox")
textBox.Size = UDim2.new(0.8, 0, 0, 30)
textBox.Position = UDim2.new(0.1, 0, 0.05, 0)
textBox.PlaceholderText = "Введите ник игрока"
textBox.Text = ""
textBox.TextColor3 = Color3.fromRGB(0, 0, 0)
textBox.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
textBox.Font = Enum.Font.Gotham
textBox.TextSize = 16
textBox.Parent = contentFrame

local textBoxCorner = Instance.new("UICorner")
textBoxCorner.CornerRadius = UDim.new(0, 5)
textBoxCorner.Parent = textBox

local function findPlayerByPartialName(partialName)
    local lowerPartial = partialName:lower()
    for _, player in ipairs(Players:GetPlayers()) do
        if player.Name:lower():find(lowerPartial) or player.DisplayName:lower():find(lowerPartial) then
            return player
        end
    end
    return nil
end

local function executeAction(actionType)
    local inputText = textBox.Text
    local targetPlayer = findPlayerByPartialName(inputText)

    if actionType == "Fling" then
        game:GetService("StarterGui"):SetCore("SendNotification", {
            Title = "Fling used!";
            Text = "script created by: t.me/tolik_scripter";
            Icon = "rbxassetid://2005276185";
            Duration = 5
        })
        game:GetService("ReplicatedStorage").FlingObservedPlayerEvent:FireServer(targetPlayer.Name)
    elseif actionType == "JumpScare" then
        game:GetService("StarterGui"):SetCore("SendNotification", {
            Title = "Jumpscare activated!";
            Text = "script created by: t.me/tolik_scripter";
            Icon = "rbxassetid://2005276185";
            Duration = 5
        })
        game:GetService("ReplicatedStorage").JumpScareObservedPlayerEvent:FireServer(targetPlayer.Name)
    elseif actionType == "Nuke" then
        game:GetService("StarterGui"):SetCore("SendNotification", {
            Title = "Nuke activated!";
            Text = "script created by: t.me/tolik_scripter";
            Icon = "rbxassetid://2005276185";
            Duration = 5
        })
        game:GetService("ReplicatedStorage").NukePurchaseEvent:FireServer(targetPlayer.Name)
    elseif actionType == "Kick" then
        game:GetService("StarterGui"):SetCore("SendNotification", {
            Title = "Player kicked!";
            Text = "Script created by: t.me/tolik_scripter";
            Icon = "rbxassetid://2005276185";
            Duration = 5
        })
        game:GetService("ReplicatedStorage").KickObservedPlayerEvent:FireServer(targetPlayer.Name)
    end
end

local actionNames = { "Fling", "JumpScare", "Nuke", "Kick" }
for i, action in ipairs(actionNames) do
    local actionButton = Instance.new("TextButton")
    actionButton.Size = UDim2.new(0.8, 0, 0, 30)
    actionButton.Position = UDim2.new(0.1, 0, 0.2 + (i - 1) * 0.15, 0)
    actionButton.Text = action
    actionButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    actionButton.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
    actionButton.Font = Enum.Font.Gotham
    actionButton.TextSize = 16
    actionButton.Parent = contentFrame

    actionButton.MouseButton1Click:Connect(function()
        executeAction(action)
    end)
end

local isContentVisible = true
arrowButton.MouseButton1Click:Connect(function()
    isContentVisible = not isContentVisible
    if isContentVisible then
        mainFrame.Size = UDim2.new(0, 300, 0, 250)
        contentFrame.Visible = true
        arrowButton.Text = "-"
    else
        mainFrame.Size = UDim2.new(0, 300, 0, 30)
        contentFrame.Visible = false
        arrowButton.Text = "+"
    end
end)

closeButton.MouseButton1Click:Connect(function()
    screenGui:Destroy()
end)
